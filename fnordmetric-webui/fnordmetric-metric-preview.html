<!--
  This file is part of the "FnordMetric" project
    Copyright (c) 2014 Laura Schlimmer
    Copyright (c) 2014 Paul Asmuth, Google Inc.

  FnordMetric is free software: you can redistribute it and/or modify it under
  the terms of the GNU General Public License v3.0. You should have received a
  copy of the GNU General Public License along with this program. If not, see
  <http://www.gnu.org/licenses/>.
-->
<template id="fnordmetric-metric-preview-base-tpl">
  <fn-loader>
  </fn-loader>
</template>

<script type="text/javascript">
  var FnordMetricMetricPreviewComponent = function() {
    this.createdCallback = function() {
      console.log("single metric component ;) ");
      console.log(this.getAttribute("data-url"));
    }

    this.attributeChangedCallback = function(attr, old_val, new_val) {
      if (attr == "data-url") {
        console.log("data url is set");
        var params = FnordMetric.util.parseQueryString(
          this.getAttribute("data-url"));

        console.log(params);

        var query = 
          FnordMetric.util.generateSQLQueryFromParams(params.query_params);

        /*
        if query_params(data_url)
          runquery(query(query_params))
      */
      }
    }


    /*
    controls_primary --> get & set button value
    controls_secondary --> get & set button values

    renderchart
    rendertable

    runquery
    */
  }
  
  window.addEventListener("fn-ready", function() {
    Fnord.registerComponent(
      "fnordmetric-metric-preview",
      FnordMetricMetricPreviewComponent);
  }, false);
</script>
