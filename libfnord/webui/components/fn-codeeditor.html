<!--
  This file is part of the "FnordMetric" project
    Copyright (c) 2014 Laura Schlimmer
    Copyright (c) 2014 Paul Asmuth, Google Inc.

  FnordMetric is free software: you can redistribute it and/or modify it under
  the terms of the GNU General Public License v3.0. You should have received a
  copy of the GNU General Public License along with this program. If not, see
  <http://www.gnu.org/licenses/>.
-->

<template id="fn-codeeditor-base-tpl">

  <div id="editor_pane"></div>
</template>

<link rel="stylesheet" href="/3rdparty/codemirror.css">
<script src="/3rdparty/codemirror.js"></script>
<script type="text/javascript">
  var CodeEditorComponent = function() {
    this.createdCallback = function() {
      var shadow = this.createShadowRoot();
      var tpl = Fnord.getTemplate("fn-codeeditor", "base");
      shadow.appendChild(tpl);
      this.initCodeMirror();
      console.log("created callback");
    };

    this.initCodeMirror = function() {
      var pane = this.shadowRoot.querySelector("#editor_pane");
      pane.innerHTML = "";

      var cm = CodeMirror(pane, {
        lineNumbers : true,
        lineWrapping: true,
        autofocus: true
      });
    }

    /*
      init codemirror
      get value
      set value
    */

  };

  window.addEventListener('fn-ready', function() {
    var codeeditor = Fnord.registerComponent("fn-codeeditor", CodeEditorComponent);
  }, false);
</script>
