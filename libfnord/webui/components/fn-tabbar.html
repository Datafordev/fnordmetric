<!--
  This file is part of the "FnordMetric" project
    Copyright (c) 2014 Laura Schlimmer
    Copyright (c) 2014 Paul Asmuth, Google Inc.

  FnordMetric is free software: you can redistribute it and/or modify it under
  the terms of the GNU General Public License v3.0. You should have received a
  copy of the GNU General Public License along with this program. If not, see
  <http://www.gnu.org/licenses/>
-->
<script type='text/javascript'>
  var TabBarComponent = function() {
    this.createdCallback = function() {
      var tabs = this.querySelectorAll("fn-tab");

      var active_elem = this.querySelector("fn-tab[data-active]");
      if (active_elem == null) {
        tabs[0].setAttribute('data-active', 'active');
      }

      var base = this;
      for (var i = 0; i < tabs.length; i++) {
        tabs[i].onclick = function() {
          base.querySelector(
            'fn-tab[data-active]').removeAttribute('data-active');
          this.setAttribute('data-active', 'active');
          base.dispatchEvent(new Event('fn-tab-click'));
        }
      };
    };

  };

  window.addEventListener('fn-ready', function() {
    var tabbar = Fnord.registerComponent("fn-tabbar", TabBarComponent);
  }, false);
</script>
